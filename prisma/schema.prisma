generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id    String @id @default(uuid())
  name  String
  email String @unique

  @@map("Users")
}

model List {
  id             String   @id @default(uuid())
  listName       String?  @default("new list")
  createdAt      DateTime @default(now())
  userIdentifier String
  favorite       Boolean  @default(false)
  items          Item[]

  @@map("Lists")
}

model Item {
  id               String      @id @default(uuid())
  customName       String?
  createdAt        DateTime    @default(now())
  quantity         Float?
  unit             String?
  listIdentifier   String?
  checked          Boolean     @default(false)
  masterItemId     String?
  customCategoryId String?
  customCategory   Category?   @relation(fields: [customCategoryId], references: [id])
  inList           List?       @relation(fields: [listIdentifier], references: [id])
  masterItem       MasterItem? @relation(fields: [masterItemId], references: [id])

  @@map("Items")
}

model MasterItem {
  id              String    @id @default(uuid())
  name            String    @unique
  imageUrl        String?
  category        String?
  approved        Boolean
  item            Item[]
  defaultCategory Category? @relation(fields: [category], references: [name])

  @@map("MasterItems")
}

model Category {
  id         String       @id @default(uuid())
  name       String       @unique
  userItem   Item[]
  masterItem MasterItem[]

  @@map("Categories")
}
